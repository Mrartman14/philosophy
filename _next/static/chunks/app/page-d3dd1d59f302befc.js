(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{14453:(e,t,s)=>{"use strict";s.d(t,{LessonsSlider:()=>l});var r=s(95155),n=s(12115);let a=e=>{let{items:t,pxPerSeconds:s=1,trackClassName:a,itemClassName:o}=e,i=(0,n.useRef)(null),[l,c]=(0,n.useState)(!1),u=(0,n.useMemo)(()=>[...t,...t],[t]);return(0,n.useEffect)(()=>{let e,t=i.current;if(!t)return;let r=()=>{!l&&(t.scrollLeft+=s,t.scrollLeft>=t.scrollWidth/2&&(t.scrollLeft=0),t.scrollLeft<0&&(t.scrollLeft=t.scrollWidth/2)),e=requestAnimationFrame(r)};return e=requestAnimationFrame(r),()=>cancelAnimationFrame(e)},[l,s]),(0,n.useEffect)(()=>{let e=i.current;if(!e)return;let t=()=>{e.scrollLeft>=e.scrollWidth/2&&(e.scrollLeft=0);let t=e.scrollWidth-e.clientWidth;(e.scrollLeft<0||e.scrollLeft>t)&&(e.scrollLeft=e.scrollWidth/2)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[]),(0,r.jsx)("div",{ref:i,className:"w-full overflow-x-auto whitespace-nowrap overscroll-x-contain grid grid-rows-1",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onTouchStart:()=>c(!0),onTouchEnd:()=>{setTimeout(()=>c(!1),1e3)},children:(0,r.jsx)("div",{className:"flex w-max ".concat(a),children:u.map((e,t)=>(0,r.jsx)("div",{className:"".concat(o),children:e},t))})})};var o=s(53558),i=s(95664);let l=()=>{let{lectures:e}=(0,i.i)();return(0,r.jsx)(a,{trackClassName:"pl-4 gap-4",itemClassName:"shrink-0 grow-0 basis-[200px] md:basis-[300px]",items:e.map(e=>(0,r.jsx)(o.Z,{lesson:e,className:"h-[150px] md:h-[200px]"},e.slug))})}},53558:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(95155),n=s(6874),a=s.n(n),o=s(66766);let i=e=>{let{lesson:t,className:s,style:n}=e;return(0,r.jsxs)(a(),{href:"/lectures/".concat(t.slug),className:"flex group relative rounded-xl overflow-hidden ".concat(s," "),style:n,title:t.title,children:[(0,r.jsx)(o.default,{fill:!0,alt:"Lecture cover",src:"".concat("/philosophy").concat(t.cover),style:{margin:0},className:"sensitive-image object-cover transition-transform duration-500 scale-150 group-hover:scale-100 group-focus:scale-100"}),(0,r.jsx)("div",{className:"absolute py-0.5 px-2 bottom-2 right-0 w-full bg-(--text-pane)",children:(0,r.jsxs)("h3",{className:"text-md md:text-2xl whitespace-nowrap text-ellipsis overflow-hidden",style:{margin:0},children:[t.order,". ",t.title]})})]})}},66766:(e,t,s)=>{"use strict";s.d(t,{default:()=>n.a});var r=s(71469),n=s.n(r)},71469:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return l},getImageProps:function(){return i}});let r=s(88229),n=s(38883),a=s(33063),o=r._(s(51193));function i(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/philosophy/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let l=a.Image},91975:(e,t,s)=>{"use strict";s.d(t,{LastViewedLesson:()=>l});var r=s(95155),n=s(12115),a=s(53558),o=s(96086),i=s(95664);let l=()=>{let{lectures:e}=(0,i.i)(),[t,s]=(0,n.useState)([]);return(0,n.useEffect)(()=>{!async function(){let t=await o.o.getLastViewedLessonIds();0!==t.length&&s(e.filter(e=>t.includes(e.slug)))}()},[e]),t.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"pb-2 p-4 border-b border-(--border)",style:{margin:0},children:"История посещений"}),(0,r.jsx)("div",{className:"width-full p-4 gap-4 flex flex-nowrap overflow-scroll",children:t.map(e=>(0,r.jsx)(a.Z,{lesson:e,className:"grow-0 shrink-0 basis-[200px] md:basis-[300px] h-[150px] md:h-[200px]"},e.slug))})]}):null}},94746:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6874,23)),Promise.resolve().then(s.bind(s,91975)),Promise.resolve().then(s.bind(s,14453))},95664:(e,t,s)=>{"use strict";s.d(t,{AppPageClientProvider:()=>o,i:()=>i});var r=s(95155),n=s(12115);let a=(0,n.createContext)({exams:[],lectures:[]}),o=e=>{let{children:t,pageConfig:s}=e;return(0,r.jsx)(a,{value:s,children:t})},i=()=>(0,n.useContext)(a)},96086:(e,t,s)=>{"use strict";let r,n;s.d(t,{o:()=>B});let a=(e,t)=>t.some(t=>e instanceof t),o=new WeakMap,i=new WeakMap,l=new WeakMap,c={get(e,t,s){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("store"===t)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return u(e[t])},set:(e,t,s)=>(e[t]=s,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function u(e){if(e instanceof IDBRequest){let t=new Promise((t,s)=>{let r=()=>{e.removeEventListener("success",n),e.removeEventListener("error",a)},n=()=>{t(u(e.result)),r()},a=()=>{s(e.error),r()};e.addEventListener("success",n),e.addEventListener("error",a)});return l.set(t,e),t}if(i.has(e))return i.get(e);let t=function(e){if("function"==typeof e)return(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(d(this),t),u(this.request)}:function(...t){return u(e.apply(d(this),t))};return(e instanceof IDBTransaction&&function(e){if(o.has(e))return;let t=new Promise((t,s)=>{let r=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",a),e.removeEventListener("abort",a)},n=()=>{t(),r()},a=()=>{s(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",n),e.addEventListener("error",a),e.addEventListener("abort",a)});o.set(e,t)}(e),a(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,c):e}(e);return t!==e&&(i.set(e,t),l.set(t,e)),t}let d=e=>l.get(e),f=["get","getKey","getAll","getAllKeys","count"],p=["put","add","delete","clear"],m=new Map;function h(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(m.get(t))return m.get(t);let s=t.replace(/FromIndex$/,""),r=t!==s,n=p.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(n||f.includes(s)))return;let a=async function(e,...t){let a=this.transaction(e,n?"readwrite":"readonly"),o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[s](...t),n&&a.done]))[0]};return m.set(t,a),a}c=(e=>({...e,get:(t,s,r)=>h(t,s)||e.get(t,s,r),has:(t,s)=>!!h(t,s)||e.has(t,s)}))(c);let w=["continue","continuePrimaryKey","advance"],v={},g=new WeakMap,x=new WeakMap,L={get(e,t){if(!w.includes(t))return e[t];let s=v[t];return s||(s=v[t]=function(...e){g.set(this,x.get(this)[t](...e))}),s}};async function*y(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let s=new Proxy(t,L);for(x.set(s,t),l.set(s,d(t));t;)yield s,t=await (g.get(s)||t.continue()),g.delete(s)}function I(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}c=(e=>({...e,get:(t,s,r)=>I(t,s)?y:e.get(t,s,r),has:(t,s)=>I(t,s)||e.has(t,s)}))(c);let b="lessons",j={lastCount:"lastCount",viewed:"viewed",lastViewedLessonIds:"lastViewedLessonIds"},E=async()=>(function(e,t,{blocked:s,upgrade:r,blocking:n,terminated:a}={}){let o=indexedDB.open(e,1),i=u(o);return r&&o.addEventListener("upgradeneeded",e=>{r(u(o.result),e.oldVersion,e.newVersion,u(o.transaction),e)}),s&&o.addEventListener("blocked",e=>s(e.oldVersion,e.newVersion,e)),i.then(e=>{a&&e.addEventListener("close",()=>a()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i})("lessonDB",0,{upgrade(e){e.objectStoreNames.contains(b)||e.createObjectStore(b)}});class D{async getLastLessonsCount(){var e;let t=await E();return null!=(e=await t.get(b,j.lastCount))?e:0}async setLastLessonsCount(e){let t=await E();await t.put(b,e,j.lastCount)}async getViewedLessonIds(){var e;let t=await E();return null!=(e=await t.get(b,j.viewed))?e:[]}async markLessonViewed(e){let t=await E(),s=await this.getViewedLessonIds();s.includes(e)||(s.push(e),await t.put(b,s,j.viewed))}async getLastViewedLessonIds(){var e;let t=await E();return null!=(e=await t.get(b,j.lastViewedLessonIds))?e:[]}async setLastViewedLessonId(e){var t;let s=await E(),r=null!=(t=await s.get(b,j.lastViewedLessonIds))?t:[];(r=r.filter(t=>t!==e)).push(e),r.length>3&&(r=r.slice(r.length-3)),await s.put(b,r,j.lastViewedLessonIds)}}let B=new D}},e=>{var t=t=>e(e.s=t);e.O(0,[874,63,441,684,358],()=>t(94746)),_N_E=e.O()}]);