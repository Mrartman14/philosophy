(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{198:(e,t,r)=>{"use strict";let n,s;r.d(t,{P2:()=>f});let a=(e,t)=>t.some(t=>e instanceof t),i=new WeakMap,l=new WeakMap,o=new WeakMap,c={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return i.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return u(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function u(e){if(e instanceof IDBRequest){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{t(u(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",a)});return o.set(t,e),t}if(l.has(e))return l.get(e);let t=function(e){if("function"==typeof e)return(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(d(this),t),u(this.request)}:function(...t){return u(e.apply(d(this),t))};return(e instanceof IDBTransaction&&function(e){if(i.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{t(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});i.set(e,t)}(e),a(e,n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,c):e}(e);return t!==e&&(l.set(e,t),o.set(t,e)),t}let d=e=>o.get(e);function f(e,t,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){let i=indexedDB.open(e,t),l=u(i);return n&&i.addEventListener("upgradeneeded",e=>{n(u(i.result),e.oldVersion,e.newVersion,u(i.transaction),e)}),r&&i.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),l.then(e=>{a&&e.addEventListener("close",()=>a()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),l}let h=["get","getKey","getAll","getAllKeys","count"],p=["put","add","delete","clear"],g=new Map;function w(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(g.get(t))return g.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,s=p.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||h.includes(r)))return;let a=async function(e,...t){let a=this.transaction(e,s?"readwrite":"readonly"),i=a.store;return n&&(i=i.index(t.shift())),(await Promise.all([i[r](...t),s&&a.done]))[0]};return g.set(t,a),a}c=(e=>({...e,get:(t,r,n)=>w(t,r)||e.get(t,r,n),has:(t,r)=>!!w(t,r)||e.has(t,r)}))(c);let v=["continue","continuePrimaryKey","advance"],m={},x=new WeakMap,C=new WeakMap,L={get(e,t){if(!v.includes(t))return e[t];let r=m[t];return r||(r=m[t]=function(...e){x.set(this,C.get(this)[t](...e))}),r}};async function*y(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let r=new Proxy(t,L);for(C.set(r,t),o.set(r,d(t));t;)yield r,t=await (x.get(r)||t.continue()),x.delete(r)}function I(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}c=(e=>({...e,get:(t,r,n)=>I(t,r)?y:e.get(t,r,n),has:(t,r)=>I(t,r)||e.has(t,r)}))(c)},32955:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var n=r(12115),s=r(73601),a=r(95664);let i=e=>{let{children:t}=e,{lectures:r}=(0,a.i)(),[i,l]=(0,n.useState)([]),[o,c]=(0,n.useState)([]),u=(0,n.useCallback)(async()=>{let e=await s._.getLastViewedLectureIds();0!==e.length&&c(e.map(e=>r.find(t=>t.slug===e)).filter(e=>!!e))},[r]),d=(0,n.useCallback)(async()=>{let e=await s._.getFavLectureIds();if(0===e.length)return l([]);l(e.map(e=>r.find(t=>t.slug===e)).filter(e=>!!e))},[r]),f=(0,n.useCallback)(e=>s._.setFavLectureId(e).then(d),[d]);return(0,n.useEffect)(()=>{u()},[u]),(0,n.useEffect)(()=>{d()},[d]),"function"==typeof t?t({favLectures:i,lectures:r,lastViewedLectures:o,onSelectFav:f}):t}},33417:(e,t,r)=>{"use strict";r.d(t,{LectureList:()=>o});var n=r(95155),s=r(74651),a=r.n(s),i=r(91649),l=r(32955);let o=()=>(0,n.jsx)(l.$,{children:e=>{let{lectures:t,favLectures:r,onSelectFav:s}=e;return Object.entries(a()(t,e=>e.section)).map(e=>{let[t,a]=e;return(0,n.jsxs)("section",{className:"w-full grid",children:[(0,n.jsx)("div",{className:"border-b border-(--border) py-2 px-4 md:px-6",children:(0,n.jsxs)("h2",{className:"inline text-3xl font-semibold relative",children:[t,(0,n.jsx)("span",{className:"absolute left-full text-sm text-(--description)",children:a.length})]})}),(0,n.jsx)("div",{className:"grid p-4 gap-4 auto-rows-[300px] md:auto-rows-[250px] md:gap-6 md:p-6",style:{gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))"},children:a.map(e=>(0,n.jsx)(i.R,{lecture:e,onSelectFav:()=>s(e.slug),isFav:r.some(t=>t.slug===e.slug)},e.title))})]},t)})}})},66766:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var n=r(71469),s=r.n(n)},71469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return l}});let n=r(88229),s=r(38883),a=r(33063),i=n._(r(51193));function l(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/philosophy/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=a.Image},73601:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var n=r(198);let s="lectures",a={lastCount:"lastCount",viewed:"viewed",lastViewedLectureIds:"lastViewedLectureIds",favLectureIds:"favLectureIds"},i=async()=>(0,n.P2)("lectureDB",1,{upgrade(e){e.objectStoreNames.contains(s)||e.createObjectStore(s)}});class l{async getLastLecturesCount(){var e;let t=await i();return null!=(e=await t.get(s,a.lastCount))?e:0}async setLastLecturesCount(e){let t=await i();await t.put(s,e,a.lastCount)}async getViewedLectureIds(){var e;let t=await i();return null!=(e=await t.get(s,a.viewed))?e:[]}async markLectureViewed(e){let t=await i(),r=await this.getViewedLectureIds();r.includes(e)||(r.push(e),await t.put(s,r,a.viewed))}async getLastViewedLectureIds(){var e;let t=await i();return null!=(e=await t.get(s,a.lastViewedLectureIds))?e:[]}async setLastViewedLectureId(e){var t;let r=await i(),n=null!=(t=await r.get(s,a.lastViewedLectureIds))?t:[];(n=n.filter(t=>t!==e)).unshift(e),n.length>10&&(n=n.slice(n.length-10)),await r.put(s,n,a.lastViewedLectureIds)}async getFavLectureIds(){var e;let t=await i();return null!=(e=await t.get(s,a.favLectureIds))?e:[]}async checkIsLectureFav(e){var t;let r=await i();return(null!=(t=await r.get(s,a.favLectureIds))?t:[]).some(t=>t===e)}async setFavLectureId(e){var t;let r=await i(),n=null!=(t=await r.get(s,a.favLectureIds))?t:[];n.includes(e)?n=n.filter(t=>t!==e):n.unshift(e),n.length>100&&(n=n.slice(n.length-100)),await r.put(s,n,a.favLectureIds)}}let o=new l},75441:(e,t,r)=>{"use strict";r.d(t,{i:()=>i});var n=r(95155);let s=e=>(0,n.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,n.jsx)("path",{d:"M17.75 20.75C17.5974 20.747 17.4487 20.702 17.32 20.62L12 16.91L6.68 20.62C6.56249 20.6915 6.42757 20.7294 6.29 20.7294C6.15243 20.7294 6.01751 20.6915 5.9 20.62C5.78491 20.5607 5.68741 20.4722 5.61722 20.3634C5.54703 20.2546 5.50661 20.1293 5.5 20V6C5.5 5.27065 5.78973 4.57118 6.30546 4.05546C6.82118 3.53973 7.52065 3.25 8.25 3.25H15.75C16.4793 3.25 17.1788 3.53973 17.6945 4.05546C18.2103 4.57118 18.5 5.27065 18.5 6V20C18.5005 20.1362 18.4634 20.2698 18.3929 20.3863C18.3223 20.5027 18.2209 20.5974 18.1 20.66C17.9927 20.7189 17.8724 20.7498 17.75 20.75ZM12 15.25C12.1532 15.2484 12.3033 15.2938 12.43 15.38L17 18.56V6C17 5.66848 16.8683 5.35054 16.6339 5.11612C16.3995 4.8817 16.0815 4.75 15.75 4.75H8.25C7.91848 4.75 7.60054 4.8817 7.36612 5.11612C7.1317 5.35054 7 5.66848 7 6V18.56L11.57 15.38C11.6967 15.2938 11.8468 15.2484 12 15.25Z",fill:"currentColor"})}),a=e=>(0,n.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,n.jsx)("path",{d:"M15.75 3.25H8.24999C7.52064 3.25 6.82117 3.53973 6.30545 4.05546C5.78972 4.57118 5.49999 5.27065 5.49999 6V20C5.49898 20.1377 5.53587 20.2729 5.60662 20.391C5.67738 20.5091 5.77926 20.6054 5.90112 20.6695C6.02298 20.7335 6.16012 20.7627 6.2975 20.754C6.43488 20.7453 6.56721 20.6989 6.67999 20.62L12 16.91L17.32 20.62C17.4467 20.7063 17.5967 20.7516 17.75 20.75C17.871 20.7486 17.9903 20.7213 18.1 20.67C18.2203 20.6041 18.3208 20.5072 18.3911 20.3894C18.4615 20.2716 18.499 20.1372 18.5 20V6C18.5 5.27065 18.2103 4.57118 17.6945 4.05546C17.1788 3.53973 16.4793 3.25 15.75 3.25Z",fill:"currentColor"})}),i=e=>{let{isFav:t,onSelect:r,className:i=""}=e;return(0,n.jsx)("button",{className:"flex items-center justify-center px-2 py-2 rounded-full bg-(--text-pane) ".concat(i),onClick:r,children:t?(0,n.jsx)(a,{}):(0,n.jsx)(s,{})})}},91602:(e,t,r)=>{Promise.resolve().then(r.bind(r,33417))},91649:(e,t,r)=>{"use strict";r.d(t,{R:()=>u});var n=r(95155),s=r(6874),a=r.n(s),i=r(66766),l=r(75441);let o=e=>(0,n.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,n.jsx)("path",{d:"M9 6L12 3M12 3L15 6M12 3V13M7.00023 10C6.06835 10 5.60241 10 5.23486 10.1522C4.74481 10.3552 4.35523 10.7448 4.15224 11.2349C4 11.6024 4 12.0681 4 13V17.8C4 18.9201 4 19.4798 4.21799 19.9076C4.40973 20.2839 4.71547 20.5905 5.0918 20.7822C5.5192 21 6.07899 21 7.19691 21H16.8036C17.9215 21 18.4805 21 18.9079 20.7822C19.2842 20.5905 19.5905 20.2839 19.7822 19.9076C20 19.4802 20 18.921 20 17.8031V13C20 12.0681 19.9999 11.6024 19.8477 11.2349C19.6447 10.7448 19.2554 10.3552 18.7654 10.1522C18.3978 10 17.9319 10 17 10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),c=e=>{let{shareData:{title:t,url:r,text:s},className:a="",iconClassName:i=""}=e,l=async()=>{let e=null!=r?r:window.location.href;if(navigator.share)try{await navigator.share({title:t,text:s,url:e})}catch(e){console.error(e)}else try{await navigator.clipboard.writeText(e)}catch(e){console.error(e)}};return(0,n.jsx)("button",{onClick:l,"aria-label":"Поделиться",className:"flex items-center justify-center w-8 h-8 rounded-full bg-(--text-pane) ".concat(a),children:(0,n.jsx)(o,{className:i})})},u=e=>{let{lecture:t,className:r="",style:s,isFav:o,onSelectFav:u}=e;return(0,n.jsxs)("article",{className:"relative group grid grid-rows-[1fr_auto] bg-(--background) ".concat(r),children:[(0,n.jsx)(a(),{href:"/lectures/".concat(t.slug),className:"relative flex overflow-hidden rounded-xl",style:s,title:t.title,children:(0,n.jsx)(i.default,{fill:!0,alt:"Lecture cover",src:"".concat("/philosophy").concat(t.cover),className:"sensitive-image object-cover transition-transform duration-500 scale-150 group-hover:scale-100 group-focus:scale-100"})}),(0,n.jsxs)("menu",{className:"absolute top-2 right-2 flex gap-2 transition-all",children:[(0,n.jsx)("li",{children:(0,n.jsx)(c,{shareData:{title:t.title},className:"md:hidden group-hover:flex group-focus:flex md:text-(--description) md:hover:text-inherit"})}),(0,n.jsx)("li",{children:(0,n.jsx)(l.i,{isFav:o,onSelect:u,className:"".concat(o?"text-(--primary)":"md:hidden md:text-(--description) md:hover:text-inherit"," group-hover:flex group-focus:flex")})})]}),(0,n.jsx)("div",{className:"text-xl pt-2 px-0 overflow-hidden flex items-center gap-1 justify-between",children:(0,n.jsx)("h3",{className:"font-semibold text-ellipsis overflow-hidden whitespace-nowrap",children:t.title})})]})}},95664:(e,t,r)=>{"use strict";r.d(t,{AppPageClientProvider:()=>i,i:()=>l});var n=r(95155),s=r(12115);let a=(0,s.createContext)({exams:[],lectures:[]}),i=e=>{let{children:t,pageConfig:r}=e;return(0,n.jsx)(a,{value:r,children:t})},l=()=>(0,s.useContext)(a)}},e=>{var t=t=>e(e.s=t);e.O(0,[874,63,651,441,684,358],()=>t(91602)),_N_E=e.O()}]);