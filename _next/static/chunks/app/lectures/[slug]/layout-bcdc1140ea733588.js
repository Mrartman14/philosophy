(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{38202:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6874,23)),Promise.resolve().then(n.t.bind(n,33063,23)),Promise.resolve().then(n.bind(n,99801)),Promise.resolve().then(n.bind(n,73125))},73125:(e,t,n)=>{"use strict";n.d(t,{ScrollButton:()=>o});var s=n(95155),r=n(12115);let o=e=>{let{className:t=""}=e,[n,o]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{o(window.scrollY<=0);let e=document.documentElement.offsetHeight,t=window.innerHeight;i(e-(t+document.documentElement.scrollTop)<=10)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let l="flex justify-end gap-2 bg-(--text-pane) rounded-full px-4 py-2 md:py-1 text-(--description) hover:text-inherit transition-opacity";return(0,s.jsxs)("div",{className:"".concat(t," gap-1 flex select-none"),children:[(0,s.jsxs)("button",{"aria-label":"скролл вверх",className:"".concat(l," ").concat(n?"opacity-0":"opacity-100"),onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:[(0,s.jsx)("span",{className:"hidden md:inline",children:"Вверх"})," ","↑"]}),(0,s.jsxs)("button",{"aria-label":"скролл вниз",className:"".concat(l," ").concat(a?"opacity-0":"opacity-100"),onClick:()=>window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),children:[(0,s.jsx)("span",{className:"hidden md:inline",children:"Вниз"})," ","↓"]})]})}},96086:(e,t,n)=>{"use strict";let s,r;n.d(t,{o:()=>V});let o=(e,t)=>t.some(t=>e instanceof t),a=new WeakMap,i=new WeakMap,l=new WeakMap,c={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest){let t=new Promise((t,n)=>{let s=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(d(e.result)),s()},o=()=>{n(e.error),s()};e.addEventListener("success",r),e.addEventListener("error",o)});return l.set(t,e),t}if(i.has(e))return i.get(e);let t=function(e){if("function"==typeof e)return(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(u(this),t),d(this.request)}:function(...t){return d(e.apply(u(this),t))};return(e instanceof IDBTransaction&&function(e){if(a.has(e))return;let t=new Promise((t,n)=>{let s=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});a.set(e,t)}(e),o(e,s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,c):e}(e);return t!==e&&(i.set(e,t),l.set(t,e)),t}let u=e=>l.get(e),w=["get","getKey","getAll","getAllKeys","count"],p=["put","add","delete","clear"],f=new Map;function h(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(f.get(t))return f.get(t);let n=t.replace(/FromIndex$/,""),s=t!==n,r=p.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||w.includes(n)))return;let o=async function(e,...t){let o=this.transaction(e,r?"readwrite":"readonly"),a=o.store;return s&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),r&&o.done]))[0]};return f.set(t,o),o}c=(e=>({...e,get:(t,n,s)=>h(t,n)||e.get(t,n,s),has:(t,n)=>!!h(t,n)||e.has(t,n)}))(c);let v=["continue","continuePrimaryKey","advance"],m={},g=new WeakMap,y=new WeakMap,I={get(e,t){if(!v.includes(t))return e[t];let n=m[t];return n||(n=m[t]=function(...e){g.set(this,y.get(this)[t](...e))}),n}};async function*L(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,I);for(y.set(n,t),l.set(n,u(t));t;)yield n,t=await (g.get(n)||t.continue()),g.delete(n)}function b(e,t){return t===Symbol.asyncIterator&&o(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&o(e,[IDBIndex,IDBObjectStore])}c=(e=>({...e,get:(t,n,s)=>b(t,n)?L:e.get(t,n,s),has:(t,n)=>b(t,n)||e.has(t,n)}))(c);let E="lessons",D={lastCount:"lastCount",viewed:"viewed",lastViewedLessonIds:"lastViewedLessonIds"},B=async()=>(function(e,t,{blocked:n,upgrade:s,blocking:r,terminated:o}={}){let a=indexedDB.open(e,1),i=d(a);return s&&a.addEventListener("upgradeneeded",e=>{s(d(a.result),e.oldVersion,e.newVersion,d(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),i.then(e=>{o&&e.addEventListener("close",()=>o()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),i})("lessonDB",0,{upgrade(e){e.objectStoreNames.contains(E)||e.createObjectStore(E)}});class x{async getLastLessonsCount(){var e;let t=await B();return null!=(e=await t.get(E,D.lastCount))?e:0}async setLastLessonsCount(e){let t=await B();await t.put(E,e,D.lastCount)}async getViewedLessonIds(){var e;let t=await B();return null!=(e=await t.get(E,D.viewed))?e:[]}async markLessonViewed(e){let t=await B(),n=await this.getViewedLessonIds();n.includes(e)||(n.push(e),await t.put(E,n,D.viewed))}async getLastViewedLessonIds(){var e;let t=await B();return null!=(e=await t.get(E,D.lastViewedLessonIds))?e:[]}async setLastViewedLessonId(e){var t;let n=await B(),s=null!=(t=await n.get(E,D.lastViewedLessonIds))?t:[];(s=s.filter(t=>t!==e)).push(e),s.length>3&&(s=s.slice(s.length-3)),await n.put(E,s,D.lastViewedLessonIds)}}let V=new x},99801:(e,t,n)=>{"use strict";n.d(t,{LessonViewObserver:()=>o});var s=n(12115),r=n(96086);let o=e=>{let{slug:t}=e;return(0,s.useEffect)(()=>{r.o.setLastViewedLessonId(t)},[t]),null}}},e=>{var t=t=>e(e.s=t);e.O(0,[874,63,441,684,358],()=>t(38202)),_N_E=e.O()}]);