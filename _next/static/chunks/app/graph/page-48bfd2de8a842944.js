(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{52979:(e,t,n)=>{Promise.resolve().then(n.bind(n,71957))},71957:(e,t,n)=>{"use strict";n.d(t,{PhilosophersTimeline:()=>k});var l=n(95155),r=n(18636),s=n(74651),o=n.n(s),i=n(12115),a=n(44462),c=n(87085),h=n(29573),u=n(21773),d=n(96223);let m=e=>{let{onChange:t,value:n,className:r}=e;return(0,l.jsx)(a.g,{value:n,min:1,max:20,onValueChange:t,className:r,children:(0,l.jsx)(c.X,{className:"flex w-20 touch-none items-center py-3 select-none",children:(0,l.jsxs)(h.h,{className:"h-2 w-full rounded bg-(--border) select-none",children:[(0,l.jsx)(u.X,{className:"rounded bg-gray-700 select-none"}),(0,l.jsx)(d.O,{className:"cursor-pointer size-3 rounded-full bg-(--link) select-none focus-visible:outline focus-visible:outline-blue-800"})]})})})};var x=n(42104),p=n(66766),f=n(8107),g=n(41565);let j=e=>{let{x:t,y:n,philosopher:r}=e;return(0,l.jsx)("foreignObject",{x:t-10,y:n-10,width:20,height:20,style:{overflow:"visible",position:"relative"},children:(0,l.jsx)(f.z,{trigger:(0,l.jsx)("div",{style:{width:20,aspectRatio:"1 / 1",borderRadius:"50%"},children:(0,l.jsx)(p.default,{fill:!0,src:"".concat("/philosophy").concat(r.imageSrc),alt:"".concat(r.name," image"),quality:1,sizes:"".concat(20,"px"),className:"cursor-pointer",style:{objectFit:"cover",borderRadius:"50%",margin:0,outline:"1px solid var(--link)"}})}),content:(0,l.jsx)(g.z,{data:r})})})};var b=n(9495);function v(e,t){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return Math.abs(n)%t}let y=(e,t)=>0===t?"M".concat(e.x," ").concat(e.y):"L".concat(e.x," ").concat(e.y),k=()=>{let[{height:e,width:t},n]=(0,i.useState)({width:0,height:0}),[s,a]=(0,i.useState)(1);(0,i.useEffect)(()=>{n({width:document.documentElement.clientWidth/1,height:document.documentElement.clientHeight/1-50})},[]);let[c,h]=(0,i.useState)(r.GSI),u=(0,i.useRef)(null),d=Math.min(...b.b.map(e=>e.from)),p=Math.max(...b.b.map(e=>e.to)),f=t*s,g=r.m4Y().domain([d,p]).range([0,f-0]);(0,i.useEffect)(()=>{if(!u.current)return;let e=r.Ltv(u.current),t=r.s_O().scaleExtent([.1,15]).on("zoom",e=>h(e.transform));e.call(t)},[]);let k=(0,i.useMemo)(()=>{let t=b.b.map(t=>({...t,x:Math.trunc(g((t.from+t.to)/2)),y:Math.trunc(e-40)}));return Object.entries(o()(x.Q,e=>e.section)).map((e,n)=>{let[l,r]=e,s=0*n,o=r.toSorted((e,t)=>e.order-t.order),i=[];return o.toSorted((e,t)=>e.order-t.order).forEach((e,r)=>{let o=(n+1)*100+6*r,a=e.mentions.map(e=>{var n;return null!=(n=t.find(t=>t.name===e))?n:null}).filter(e=>null!==e),c=[],h=[];a.forEach(t=>{let{x:n,y:r,name:i}=t;c.push({point:{x:n+s,y:r-o},lesson:e,chapter:l,mention:i}),h.push({chapter:l,lesson:e,point:{x:n,y:r},mention:i}),h.push({chapter:l,lesson:e,point:{x:n+s,y:r-o},mention:i})});let u={chapter:l,lessonPoints:c,lesson:e.title,connectionPoints:h};i.push(u)}),i})},[e,g]),N=(0,i.useMemo)(()=>{let e=c.k>1.5?100:500,t=[];for(let n=Math.ceil(d/e)*e;n<=p;n+=e)t.push(n);return t},[p,d,c.k]);return(0,l.jsxs)("div",{className:"relative overflow-x-auto w-full",children:[(0,l.jsx)(m,{value:s,onChange:a,className:"absolute top-2 right-2"}),(0,l.jsx)("svg",{className:"fill-current",ref:u,width:t,height:e,children:(0,l.jsxs)("g",{transform:c.toString(),children:[c.k>=1&&(0,l.jsx)("g",{"data-id":"timestamps",children:N.map(t=>(0,l.jsxs)("g",{children:[(0,l.jsx)("line",{x1:g(t),x2:g(t),y1:e-40,y2:e-30,stroke:"var(--link)",strokeWidth:1}),(0,l.jsx)("text",{x:g(t),y:e-15,textAnchor:"middle",className:"text-(--description) font-light",fontSize:12/c.k,children:t<0?"-".concat(Math.abs(t)):t})]},t))}),(0,l.jsx)("line",{x1:g(d),x2:g(p),y1:e-40,y2:e-40,stroke:"var(--link)",strokeWidth:2}),k.map((e,t)=>(0,l.jsx)("g",{children:e.map(e=>{var t,n;let{lessonPoints:r,connectionPoints:s,lesson:o,chapter:i}=e,a=1===r.length,h=i.length+1,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.substring(0,t),l=e.substring(t),r=v(n,360),s=40+v(l,40),o=40+v(l.split("").reverse().join(""),30);return"hsl(".concat(r,", ").concat(s,"%, ").concat(o,"%)")}("".concat(i,"-").concat(o),h),d=a?(0,l.jsx)("circle",{cx:r[0].point.x,cy:r[0].point.y,r:2.5,fill:u}):(0,l.jsx)("path",{d:r.map((e,t)=>{let{point:n}=e;return y(n,t)}).join(" "),stroke:u,strokeWidth:5,fill:"none"},"".concat(o)),m=s.map((e,t)=>{let{point:n}=e;return y(n,t)}).join(" "),x={x:null!=(t=function(e){return e&&0!==e.length?e.reduce((e,t)=>e+t.x,0)/e.length:null}(r.map(e=>e.point)))?t:0,y:null!=(n=r[0].point.y)?n:0};return(0,l.jsxs)("g",{children:[d,c.k>=1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("text",{x:x.x,y:x.y,className:"font-semibold",textAnchor:"middle",dominantBaseline:"middle",fontSize:12/c.k,children:o}),(0,l.jsx)("path",{d:m,stroke:u,strokeWidth:.1,fill:"none"},"".concat(o,"-connector"))]})]},o)})},t)),(0,l.jsx)("g",{children:b.b.map(t=>(0,l.jsx)(j,{scale:c.k,x:Math.trunc(g((t.from+t.to)/2)),y:Math.trunc(e-40),philosopher:t},t.name))})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[545,63,279,578,931,460,441,684,358],()=>t(52979)),_N_E=e.O()}]);