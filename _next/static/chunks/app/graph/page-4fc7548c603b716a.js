(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{52979:(e,t,n)=>{Promise.resolve().then(n.bind(n,71957))},71957:(e,t,n)=>{"use strict";n.d(t,{PhilosophersTimeline:()=>k});var r=n(95155),l=n(18636),s=n(74651),o=n.n(s),i=n(12115),a=n(44462),c=n(87085),u=n(29573),h=n(21773),d=n(96223);let m=e=>{let{onChange:t,value:n,className:l}=e;return(0,r.jsx)(a.g,{value:n,min:1,max:20,onValueChange:t,className:l,children:(0,r.jsx)(c.X,{className:"flex w-20 touch-none items-center py-3 select-none",children:(0,r.jsxs)(u.h,{className:"h-2 w-full rounded bg-(--border) select-none",children:[(0,r.jsx)(h.X,{className:"rounded bg-gray-700 select-none"}),(0,r.jsx)(d.O,{className:"cursor-pointer size-3 rounded-full bg-(--link) select-none focus-visible:outline focus-visible:outline-blue-800"})]})})})};var x=n(42104),p=n(66766),f=n(8107),g=n(41565);let j=e=>{let{x:t,y:n,philosopher:l}=e;return(0,r.jsx)("foreignObject",{x:t-10,y:n-10,width:20,height:20,style:{overflow:"visible",position:"relative"},children:(0,r.jsx)(f.z,{triggerProps:{className:"cursor-pointer",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},trigger:(0,r.jsx)("div",{style:{position:"relative",width:20,aspectRatio:"1 / 1",borderRadius:"50%"},children:(0,r.jsx)(p.default,{fill:!0,src:"".concat("/philosophy").concat(l.imageSrc),alt:"".concat(l.name," image"),quality:1,sizes:"100px",style:{objectFit:"cover",borderRadius:"50%",margin:0,outline:"1px solid var(--link)"}})}),content:(0,r.jsx)(g.z,{data:l})})})};var v=n(9495);function b(e,t){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return Math.abs(n)%t}let y=(e,t)=>0===t?"M".concat(e.x," ").concat(e.y):"L".concat(e.x," ").concat(e.y),k=()=>{let[{height:e,width:t},n]=(0,i.useState)({width:0,height:0}),[s,a]=(0,i.useState)(1);(0,i.useEffect)(()=>{n({width:document.documentElement.clientWidth/1,height:document.documentElement.clientHeight/1-50})},[]);let[c,u]=(0,i.useState)(l.GSI),h=(0,i.useRef)(null),d=Math.min(...v.b.map(e=>e.from)),p=Math.max(...v.b.map(e=>e.to)),f=t*s,g=l.m4Y().domain([d,p]).range([0,f-0]);(0,i.useEffect)(()=>{if(!h.current)return;let e=l.Ltv(h.current),t=l.s_O().scaleExtent([.1,15]).on("zoom",e=>u(e.transform));e.call(t)},[]);let k=(0,i.useMemo)(()=>{let t=v.b.map(t=>({...t,x:Math.trunc(g((t.from+t.to)/2)),y:Math.trunc(e-40)}));return Object.entries(o()(x.Q,e=>e.section)).map((e,n)=>{let[r,l]=e,s=0*n,o=l.toSorted((e,t)=>e.order-t.order),i=[];return o.toSorted((e,t)=>e.order-t.order).forEach((e,l)=>{let o=(n+1)*100+6*l,a=e.mentions.map(e=>{var n;return null!=(n=t.find(t=>t.name===e))?n:null}).filter(e=>null!==e),c=[],u=[];a.forEach(t=>{let{x:n,y:l,name:i}=t;c.push({point:{x:n+s,y:l-o},lesson:e,chapter:r,mention:i}),u.push({chapter:r,lesson:e,point:{x:n,y:l},mention:i}),u.push({chapter:r,lesson:e,point:{x:n+s,y:l-o},mention:i})});let h={chapter:r,lessonPoints:c,lesson:e.title,connectionPoints:u};i.push(h)}),i})},[e,g]),w=(0,i.useMemo)(()=>{let e=c.k>1.5?100:500,t=[];for(let n=Math.ceil(d/e)*e;n<=p;n+=e)t.push(n);return t},[p,d,c.k]);return(0,r.jsxs)("div",{className:"relative overflow-x-auto w-full",children:[(0,r.jsx)(m,{value:s,onChange:a,className:"absolute top-2 right-2"}),(0,r.jsx)("svg",{className:"fill-current",ref:h,width:t,height:e,children:(0,r.jsxs)("g",{transform:c.toString(),children:[c.k>=1&&(0,r.jsx)("g",{"data-id":"timestamps",children:w.map(t=>(0,r.jsxs)("g",{children:[(0,r.jsx)("line",{x1:g(t),x2:g(t),y1:e-40,y2:e-30,stroke:"var(--link)",strokeWidth:1}),(0,r.jsx)("text",{x:g(t),y:e-15,textAnchor:"middle",fontSize:12/c.k,children:t<0?"-".concat(Math.abs(t)):t})]},t))}),(0,r.jsx)("line",{x1:g(d),x2:g(p),y1:e-40,y2:e-40,stroke:"var(--link)",strokeWidth:2}),k.map((e,t)=>(0,r.jsx)("g",{children:e.map(e=>{var t,n;let{lessonPoints:l,connectionPoints:s,lesson:o,chapter:i}=e,a=1===l.length,u=i.length+1,h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.substring(0,t),r=e.substring(t),l=b(n,360),s=40+b(r,40),o=40+b(r.split("").reverse().join(""),30);return"hsl(".concat(l,", ").concat(s,"%, ").concat(o,"%)")}("".concat(i,"-").concat(o),u),d=a?(0,r.jsx)("circle",{cx:l[0].point.x,cy:l[0].point.y,r:2.5,fill:h}):(0,r.jsx)("path",{d:l.map((e,t)=>{let{point:n}=e;return y(n,t)}).join(" "),stroke:h,strokeWidth:5,fill:"none"},"".concat(o)),m=s.map((e,t)=>{let{point:n}=e;return y(n,t)}).join(" "),x={x:null!=(t=function(e){return e&&0!==e.length?e.reduce((e,t)=>e+t.x,0)/e.length:null}(l.map(e=>e.point)))?t:0,y:null!=(n=l[0].point.y)?n:0};return(0,r.jsxs)("g",{children:[d,c.k>=1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("text",{x:x.x,y:x.y,textAnchor:"middle",dominantBaseline:"middle",fontSize:12/c.k,children:o}),(0,r.jsx)("path",{d:m,stroke:h,strokeWidth:.1,fill:"none"},"".concat(o,"-connector"))]})]},o)})},t)),(0,r.jsx)("g",{children:v.b.map(t=>(0,r.jsx)(j,{scale:c.k,x:Math.trunc(g((t.from+t.to)/2)),y:Math.trunc(e-40),philosopher:t},t.name))})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[545,63,279,578,931,460,441,684,358],()=>t(52979)),_N_E=e.O()}]);