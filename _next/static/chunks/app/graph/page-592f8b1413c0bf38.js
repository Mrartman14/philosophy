(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{52979:(e,t,n)=>{Promise.resolve().then(n.bind(n,71957))},71957:(e,t,n)=>{"use strict";n.d(t,{PhilosophersTimeline:()=>k});var l=n(95155),r=n(18636),o=n(74651),s=n.n(o),i=n(12115),a=n(44462),c=n(87085),h=n(29573),u=n(21773),d=n(96223);let m=e=>{let{onChange:t,value:n,className:r}=e;return(0,l.jsx)(a.g,{value:n,min:1,max:20,onValueChange:t,className:r,children:(0,l.jsx)(c.X,{className:"flex w-20 touch-none items-center py-3 select-none",children:(0,l.jsxs)(h.h,{className:"h-2 w-full rounded bg-(--border) select-none",children:[(0,l.jsx)(u.X,{className:"rounded bg-gray-700 select-none"}),(0,l.jsx)(d.O,{className:"cursor-pointer size-3 rounded-full bg-(--link) select-none focus-visible:outline focus-visible:outline-blue-800"})]})})})};var x=n(42104),p=n(66766),f=n(8107),g=n(41565);let j=e=>{let{x:t,y:n,philosopher:r}=e;return(0,l.jsx)("foreignObject",{x:t-10,y:n-10,width:20,height:20,style:{overflow:"visible",position:"relative"},children:(0,l.jsx)(f.z,{triggerProps:{className:"cursor-pointer",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},trigger:(0,l.jsx)("div",{style:{position:"relative",width:20,aspectRatio:"1 / 1",borderRadius:"50%"},children:(0,l.jsx)(p.default,{fill:!0,src:"".concat("/philosophy").concat(r.imageSrc),alt:"".concat(r.name," image"),quality:1,sizes:"100px",style:{objectFit:"cover",borderRadius:"50%",margin:0,outline:"1px solid var(--link)"}})}),content:(0,l.jsx)(g.z,{data:r})})})};var y=n(9495);function v(e,t){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return Math.abs(n)%t}let b=(e,t)=>0===t?"M".concat(e.x," ").concat(e.y):"L".concat(e.x," ").concat(e.y),k=()=>{let[{height:e,width:t},n]=(0,i.useState)({width:0,height:0}),[o,a]=(0,i.useState)(1);(0,i.useEffect)(()=>{n({width:document.documentElement.clientWidth/1,height:document.documentElement.clientHeight/1-50})},[]);let[c,h]=(0,i.useState)(r.GSI),u=(0,i.useRef)(null),d=Math.min(...y.b.map(e=>e.from)),p=Math.max(...y.b.map(e=>e.to)),f=t*o,g=r.m4Y().domain([d,p]).range([60,f-60]);(0,i.useEffect)(()=>{if(!u.current)return;let e=r.Ltv(u.current),t=r.s_O().scaleExtent([.1,15]).on("zoom",e=>h(e.transform));e.call(t)},[]);let k=(0,i.useMemo)(()=>{let t=y.b.map(t=>({...t,x:Math.trunc(g((t.from+t.to)/2)),y:Math.trunc(e-40)}));return Object.entries(s()(x.Q,e=>e.section)).map((e,n)=>{let[l,r]=e,o=0*n,s=r.toSorted((e,t)=>e.order-t.order),i=[];return s.toSorted((e,t)=>e.order-t.order).forEach((e,r)=>{let s=(n+1)*100+6*r,a=e.mentions.map(e=>{var n;return null!=(n=t.find(t=>t.name===e))?n:null}).filter(e=>null!==e),c=[],h=[];a.forEach(t=>{let{x:n,y:r,name:i}=t;c.push({point:{x:n+o,y:r-s},lesson:e,chapter:l,mention:i}),h.push({chapter:l,lesson:e,point:{x:n,y:r},mention:i}),h.push({chapter:l,lesson:e,point:{x:n+o,y:r-s},mention:i})});let u={chapter:l,lessonPoints:c,lesson:e.title,connectionPoints:h};i.push(u)}),i})},[e,g]),M=(0,i.useMemo)(()=>{let e=c.k>1.5?100:500,t=[];for(let n=Math.ceil(d/e)*e;n<=p;n+=e)t.push(n);return t},[p,d,c.k]);return(0,l.jsxs)("div",{className:"relative overflow-x-auto w-full",children:[(0,l.jsx)(m,{value:o,onChange:a,className:"absolute top-2 right-2"}),(0,l.jsx)("svg",{className:"fill-current",ref:u,width:t,height:e,children:(0,l.jsxs)("g",{transform:c.toString(),children:[c.k>1&&(0,l.jsx)("g",{"data-id":"timestamps",children:M.map(t=>(0,l.jsxs)("g",{children:[(0,l.jsx)("line",{x1:g(t),x2:g(t),y1:e-40,y2:e-30,stroke:"var(--link)",strokeWidth:1}),(0,l.jsx)("text",{x:g(t),y:e-15,textAnchor:"middle",fontSize:12/c.k,children:t<0?"-".concat(Math.abs(t)):t})]},t))}),(0,l.jsx)("line",{x1:g(d),x2:g(p),y1:e-40,y2:e-40,stroke:"var(--link)",strokeWidth:2}),k.map((e,t)=>(0,l.jsx)("g",{children:e.map(e=>{var t,n;let{lessonPoints:r,connectionPoints:o,lesson:s,chapter:i}=e,a=1===r.length,h=i.length+1,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.substring(0,t),l=e.substring(t),r=v(n,360),o=40+v(l,40),s=40+v(l.split("").reverse().join(""),30);return"hsl(".concat(r,", ").concat(o,"%, ").concat(s,"%)")}("".concat(i,"-").concat(s),h),d=a?(0,l.jsx)("circle",{cx:r[0].point.x,cy:r[0].point.y,r:2.5,fill:u}):(0,l.jsx)("path",{d:r.map((e,t)=>{let{point:n}=e;return b(n,t)}).join(" "),stroke:u,strokeWidth:5,fill:"none"},"".concat(s)),m=o.map((e,t)=>{let{point:n}=e;return b(n,t)}).join(" "),x=function(e){if(!e||0===e.length)return null;if(1==e.length)return e[0];let t=[],n=0;for(let l=1;l<e.length;l++){let r=Math.hypot(e[l].x-e[l-1].x,e[l].y-e[l-1].y);t.push(r),n+=r}let l=n/2,r=0;for(let n=0;n<t.length;n++){if(r+t[n]>=l){let o=(l-r)/t[n];return{x:e[n].x+(e[n+1].x-e[n].x)*o,y:e[n].y+(e[n+1].y-e[n].y)*o}}r+=t[n]}return e[e.length-1]}(r.map(e=>e.point));return(0,l.jsxs)("g",{children:[d,c.k>1&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("text",{x:null!=(t=null==x?void 0:x.x)?t:0,y:null!=(n=null==x?void 0:x.y)?n:0,textAnchor:"middle",dominantBaseline:"middle",fontSize:12/c.k,children:s}),(0,l.jsx)("path",{d:m,stroke:u,strokeWidth:.1,fill:"none"},"".concat(s,"-connector"))]})]},s)})},t)),(0,l.jsx)("g",{children:y.b.map(t=>(0,l.jsx)(j,{scale:c.k,x:Math.trunc(g((t.from+t.to)/2)),y:Math.trunc(e-40),philosopher:t},t.name))})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[545,63,279,578,931,460,441,684,358],()=>t(52979)),_N_E=e.O()}]);