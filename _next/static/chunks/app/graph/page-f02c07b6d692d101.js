(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[813],{52979:(e,t,n)=>{Promise.resolve().then(n.bind(n,71957))},71957:(e,t,n)=>{"use strict";n.d(t,{PhilosophersTimeline:()=>y});var r=n(95155),l=n(18636),s=n(74651),o=n.n(s),a=n(12115),i=n(40787),c=n(87085),h=n(29573),u=n(21773),d=n(96223);let m=e=>{let{onChange:t,value:n,className:l}=e;return(0,r.jsx)(i.g,{value:n,min:1,max:20,onValueChange:t,className:l,children:(0,r.jsx)(c.X,{className:"flex w-20 touch-none items-center py-3 select-none",children:(0,r.jsxs)(h.h,{className:"h-2 w-full rounded bg-(--border) select-none",children:[(0,r.jsx)(u.X,{className:"rounded bg-gray-700 select-none"}),(0,r.jsx)(d.O,{className:"cursor-pointer size-3 rounded-full bg-(--link) select-none focus-visible:outline focus-visible:outline-blue-800"})]})})})};var x=n(8107),p=n(41565);let f=e=>{let{x:t,y:n,philosopher:l}=e;return(0,r.jsx)("foreignObject",{x:t-15,y:n-15,width:30,height:30,children:(0,r.jsx)(x.z,{trigger:(0,r.jsx)("div",{style:{width:30,height:30,aspectRatio:"1 / 1",borderRadius:"50%",backgroundImage:"url(".concat("/philosophy").concat(l.imageSrc,")"),backgroundSize:"cover",backgroundPosition:"center",cursor:"pointer"}}),content:(0,r.jsx)(p.z,{data:l})})})};var g=n(42104),b=n(9495);function j(e,t){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return Math.abs(n)%t}let v=(e,t)=>0===t?"M".concat(e.x," ").concat(e.y):"L".concat(e.x," ").concat(e.y),y=()=>{let[{height:e,width:t},n]=(0,a.useState)({width:0,height:0}),[s,i]=(0,a.useState)(1);(0,a.useEffect)(()=>{n({width:document.documentElement.clientWidth/1,height:document.documentElement.clientHeight/1-50})},[]);let[c,h]=(0,a.useState)(l.GSI),u=(0,a.useRef)(null),d=Math.min(...b.b.map(e=>e.from)),x=Math.max(...b.b.map(e=>e.to)),p=t*s,y=l.m4Y().domain([d,x]).range([0,p-0]);(0,a.useEffect)(()=>{if(!u.current)return;let e=l.Ltv(u.current),t=l.s_O().scaleExtent([.1,15]).on("zoom",e=>h(e.transform));e.call(t)},[]);let k=(0,a.useMemo)(()=>{let t=b.b.map(t=>({...t,x:Math.trunc(y((t.from+t.to)/2)),y:Math.trunc(e-150)}));return Object.entries(o()(g.Q,e=>e.section)).map((e,n)=>{let[r,l]=e,s=0*n,o=l.toSorted((e,t)=>e.order-t.order),a=[];return o.toSorted((e,t)=>e.order-t.order).forEach((e,l)=>{let o=(n+1)*100+6*l,i=e.mentions.map(e=>{var n;return null!=(n=t.find(t=>t.name===e))?n:null}).filter(e=>null!==e),c=[],h=[];i.forEach(t=>{let{x:n,y:l,name:a}=t;c.push({point:{x:n+s,y:l-o},lesson:e,chapter:r,mention:a}),h.push({chapter:r,lesson:e,point:{x:n,y:l},mention:a}),h.push({chapter:r,lesson:e,point:{x:n+s,y:l-o},mention:a})});let u={chapter:r,lessonPoints:c,lesson:e.title,connectionPoints:h};a.push(u)}),a})},[e,y]),M=(0,a.useMemo)(()=>{let e={.05:1e3,1:500,2:100,3:50,8:25},t=1e4;for(let n of Object.keys(e).map(Number).sort((e,t)=>t-e))if(c.k>=n){t=e[n];break}let n=[];for(let e=Math.ceil(d/t)*t;e<=x;e+=t)n.push(e);return n},[x,d,c.k]),N=c.rescaleX(y);return(0,r.jsxs)("div",{className:"relative overflow-x-auto w-full",children:[(0,r.jsx)(m,{value:s,onChange:i,className:"absolute top-2 right-2"}),(0,r.jsxs)("svg",{className:"fill-current",ref:u,width:t,height:e,children:[(0,r.jsx)("g",{transform:c.toString(),"data-id":"lessons",children:k.map((e,t)=>(0,r.jsx)("g",{children:e.map(e=>{var t,n;let{lesson:l,chapter:s,lessonPoints:o}=e,a=1===o.length,i=s.length+1,h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=e.substring(0,t),r=e.substring(t),l=j(n,360),s=40+j(r,40),o=40+j(r.split("").reverse().join(""),30);return"hsl(".concat(l,", ").concat(s,"%, ").concat(o,"%)")}("".concat(s,"-").concat(l),i),u=a?(0,r.jsx)("circle",{cx:o[0].point.x,cy:o[0].point.y,r:2.5,fill:h}):(0,r.jsx)("path",{d:o.map((e,t)=>{let{point:n}=e;return v(n,t)}).join(" "),stroke:h,strokeWidth:5,fill:"none"},"".concat(l)),d={x:null!=(t=function(e){return e&&0!==e.length?e.reduce((e,t)=>e+t.x,0)/e.length:null}(o.map(e=>e.point)))?t:0,y:null!=(n=o[0].point.y)?n:0};return(0,r.jsxs)("g",{children:[u,c.k>=1&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("text",{x:d.x,y:d.y,className:"font-semibold",textAnchor:"middle",dominantBaseline:"middle",fontSize:12/c.k,children:l})})]},l)})},t))}),(0,r.jsx)("line",{y1:e-150,y2:e-150,x1:0,x2:t,stroke:"var(--link)",strokeWidth:2}),(0,r.jsx)("g",{"data-id":"timestamps",children:M.map(t=>(0,r.jsx)("text",{textAnchor:"middle",className:"text-(--description) font-light",x:Math.trunc(N(t)),y:Math.trunc(e-150+40),children:t<0?"-".concat(Math.abs(t)):t},t))}),(0,r.jsx)("g",{"data-id":"philosophers",children:b.b.map(t=>(0,r.jsx)(f,{scale:c.k,x:Math.trunc(N((t.from+t.to)/2)),y:Math.trunc(e-150),philosopher:t},t.name))})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[545,63,44,204,596,460,441,684,358],()=>t(52979)),_N_E=e.O()}]);